<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Printer Helper</title>
  <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
</head>

<body style="background: white;">
  <div class="mx-auto pt-5" style="width: 800px; height: 600;">
    <table class="table table-borderless">
      <colgroup>
        <col width="20%">
        <col width="15%">
        <col width="50%">
        <col width="*%">
      </colgroup>
      <tbody>
        <tr>
          <td>총페이지</td><td></td>
          <td><input type="text" class="form-control" id="input_total_page" /></td>
          <td></td>
        </tr>
        <tr>
          <td>더할 페이지(로마자)</td><td></td>
          <td><input type="text" class="form-control" id="input_add_page" value="0" /></td>
          <td></td>
        </tr>
        <tr>
          <td>컬러페이지</td><td id="color_page_count"></td>
          <td><input type="text" class="form-control" id="input_color_page" /></td>
          <td>
    				<div class="custom-control custom-checkbox">
              <input type="checkbox" id="jb-checkbox" class="custom-control-input">
              <label class="custom-control-label" for="jb-checkbox">양면출력</label>
              </div>
          </td>
        </tr>
        <tr>
          <td>흑백페이지</td><td id="black_page_count"></td>
          <td><input type="text" class="form-control" id="input_black_page" /></td>
          <td><button id="copy" type="button" class="btn btn-primary btn-sm btn-block">복사하기</button></td>
        </tr>
        <tr>
          <td>파일이름</td><td></td>
          <td><input type="text" class="form-control" id="save" /></td>
          <td><a href="#" class="btn btn-primary btn-sm btn-block disabled" tabindex="-1" role="button" aria-disabled="true">저장</a></td>
        </tr>
        <tr>
          <td></td><td></td>
          <td></td>
          <td><button id="load" type="button" class="btn btn-primary btn-sm btn-block" onclick="popup_load_page()">불러오기</button></td>
        </tr>
      </tbody>
    </table>
  </div>

<!-- <script>require('bootstrap');</script> -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script>window.$ = window.jQuery = require('jquery');</script>
<script type="text/javascript" src="./helper.js"></script>
<script type="text/javascript">
  print_helper = new Helper();

  function popup_load_page() {
    var top = window.screenY;
    var left = window.screenX + 800;

    var options = 'top=' + top + ', left=' + left + ', width=500, height=600, status=no, menubar=no, toolbar=no, resizable=no'; 
    console.log(options);
    window.open("load_page.html", name="test", options);
  }

  $("#input_total_page").focusout(function() {
    print_helper.total_page_count = parseInt($("#input_total_page").val());
    refresh();
  });

  $("#input_add_page").focusout(function() {
    print_helper.add_page_count = parseInt($("#input_add_page").val());
    refresh();
  });

  $("#input_color_page").focusout(function() {
    print_helper.color_page_str = $("#input_color_page").val();
    refresh();
  });

  function refresh() {
    if( print_helper.calculate_all_page() ) {
      $("#input_black_page").val(print_helper.black_page_str);
      $("#color_page_count").html(print_helper.color_page_count+" 페이지");
      $("#black_page_count").html(print_helper.black_page_count+" 페이지");
    }
  }

</script>
</body>
</html>
